<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="my-config">
<meta property="og:type" content="article">
<meta property="og:title" content="Emacs config with org-mode">
<meta property="og:url" content="http://example.com/2018/04/17/emacs-config/index.html">
<meta property="og:site_name" content="朝乾夕惕,虚怀如谷">
<meta property="og:description" content="my-config">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-04-17T13:43:25.000Z">
<meta property="article:modified_time" content="2025-03-21T16:10:24.947Z">
<meta property="article:author" content="Stanhe">
<meta property="article:tag" content="emacs">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2018/04/17/emacs-config/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2018/04/17/emacs-config/","path":"2018/04/17/emacs-config/","title":"Emacs config with org-mode"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Emacs config with org-mode | 朝乾夕惕,虚怀如谷</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">朝乾夕惕,虚怀如谷</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">与喧嚣低调同行</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Stanhe</p>
  <div class="site-description" itemprop="description">灵魂躁动不安</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/17/emacs-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanhe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝乾夕惕,虚怀如谷">
      <meta itemprop="description" content="灵魂躁动不安">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Emacs config with org-mode | 朝乾夕惕,虚怀如谷">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Emacs config with org-mode
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-04-17 21:43:25" itemprop="dateCreated datePublished" datetime="2018-04-17T21:43:25+08:00">2018-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-22 00:10:24" itemprop="dateModified" datetime="2025-03-22T00:10:24+08:00">2025-03-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><!--![image]()-->
<center> my-config </center>
<span id="more"></span>

<center> ========================= init.el ============================ </center>

<pre><code>; init file

;; Added by Package.el.  This must come before configurations of
;; installed packages.  Don&#39;t delete this line.  If you don&#39;t want it,
;; just comment it out by adding a semicolon to the start of the line.
;; You may delete these explanatory comments.
(setq package-enable-at-startup nil)
(package-initialize)

;;init with org-file
(org-babel-load-file (expand-file-name &quot;stanhe.org&quot; user-emacs-directory))



(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won&#39;t work right.

 &#39;(company-idle-delay 0.1)
 &#39;(company-minimum-prefix-length 1)
;; &#39;(org-agenda-files(quote (&quot;~/org/&quot;)))

 )
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won&#39;t work right.
 )

```			 
&lt;center&gt; ========================= stanhe.org ============================ &lt;/center&gt;

```			 
* Emacs 配置
** 基础配置文件
*** 界面及保存
#+BEGIN_SRC emacs-lisp
;; base config
(menu-bar-mode -1)
(tool-bar-mode -1)
(scroll-bar-mode -1)
(global-linum-mode 1)
(fset &#39;yes-or-no-p &#39;y-or-n-p)
(setq inhibit-splash-screen -1)
(setq auto-save-default nil)
(setq make-backup-files nil)
(setq-default abbrev-mode t)
(setq shell-command-switch &quot;-ic&quot;)
#+END_SRC
** 我的配置文件
*** 打开我的配置文件
 #+BEGIN_SRC emacs-lisp
(defun my-config-file ()
  (interactive)
  (find-file &quot;~/.emacs.d/stanhe.org&quot;))
 #+END_SRC
*** 绑定配置文件快捷键
#+BEGIN_SRC emacs-lisp
(global-set-key (kbd &quot;&lt;f5&gt;&quot;) `my-config-file)
#+END_SRC
** 包管理及配置文件
*** 源管理
#+BEGIN_SRC emacs-lisp
;init packages
(when (&gt;= emacs-major-version 24)
  (setq package-archives &#39;((&quot;gnu&quot; . &quot;http://elpa.emacs-china.org/gnu/&quot;)
               (&quot;melpa&quot; . &quot;http://elpa.emacs-china.org/melpa/&quot;))))
#+END_SRC
*** 包管理
#+BEGIN_SRC emacs-lisp
(defvar stanhe/packages &#39;(
                     use-package
                     neotree
                     ace-window
             company
             hungry-delete
             counsel
             evil
             js2-mode
             general
             smartparens
             which-key
             window-numbering
             popwin
             monokai-theme
             projectile
             counsel-projectile
             magit
             keychain-environment
                     gh-md
                     markdown-mode
                     multi-term

             ) &quot;My default packages&quot;)

#+END_SRC
*** 包安装
#+BEGIN_SRC emacs-lisp
(require &#39;cl)

(setq package-selected-packages stanhe/packages)

(defun stanhe/packages-install-p ()
  (loop for pkg in stanhe/packages
    when (not (package-installed-p pkg)) do (return nil)
    finally (return t)))

(unless (stanhe/packages-install-p)
  (message &quot;%s&quot; &quot;Refreshing package database...&quot;)
  (package-refresh-contents)
  (dolist (pkg stanhe/packages)
    (when (not (package-installed-p pkg))
      (package-install pkg))))
#+END_SRC
    
*** 加载相关包配置
    按上面包添加顺序初始化
#+BEGIN_SRC emacs-lisp
  (load-theme &#39;monokai 1)
  (require &#39;use-package)

  (use-package company
      :init
      (global-company-mode 1)
      :hook(after-init-hook . global-company-mode))

  (use-package hungry-delete
      :config
      (global-hungry-delete-mode))

  (use-package counsel
      :init
      (setq ivy-use-virtual-buffers t
        ivy-count-format &quot;(%d/%d) &quot;
        ivy-height 20
        enable-recursive-minibuffers t)
      :config 
      (ivy-mode 1)
      (ivy-set-actions
      &#39;counsel-find-file
      &#39;((&quot;m&quot; delete-file &quot;delete&quot;)))
      (global-set-key &quot;\C-s&quot; &#39;swiper)
      (global-set-key (kbd &quot;C-c C-r&quot;) &#39;ivy-resume)
      (global-set-key (kbd &quot;&lt;f6&gt;&quot;) &#39;ivy-resume)
      (global-set-key (kbd &quot;M-x&quot;) &#39;counsel-M-x)
      (global-set-key (kbd &quot;C-x C-f&quot;) &#39;counsel-find-file)
      (global-set-key (kbd &quot;&lt;f1&gt; f&quot;) &#39;counsel-describe-function)
      (global-set-key (kbd &quot;&lt;f1&gt; v&quot;) &#39;counsel-describe-variable)
      (global-set-key (kbd &quot;&lt;f1&gt; l&quot;) &#39;counsel-find-library)
      (global-set-key (kbd &quot;&lt;f2&gt; i&quot;) &#39;counsel-info-lookup-symbol)
      (global-set-key (kbd &quot;&lt;f2&gt; u&quot;) &#39;counsel-unicode-char)
      (global-set-key (kbd &quot;C-c g&quot;) &#39;counsel-git)
      (define-key minibuffer-local-map (kbd &quot;C-r&quot;) &#39;counsel-minibuffer-history))

  (use-package org
      :init
      (setq org-src-fontify-natively t
        org-log-done &#39;time
        org-agenda-files &#39;(&quot;~/org/&quot;)
        org-confirm-babel-evaluate nil))

  (use-package smartparens-config
      :config
      (show-paren-mode)
      (smartparens-global-mode)
      (sp-local-pair &#39;(emacs-lisp-mode lisp-interaction-mode) &quot;&#39;&quot; nil :actions nil))

  (use-package which-key
      :config
      (which-key-mode 1))

  (use-package window-numbering
      :config
      (window-numbering-mode 1))

  (use-package popwin
      :config
      (popwin-mode 1))

  (use-package dired-x)
  (use-package dired
      :init
      (setq dired-recursive-deletes &#39;always
        dired-recursive-copies &#39;always
        dired-dwim-target t)
      :config
      (put &#39;dired-find-alternate-file &#39;disabled nil)
      (define-key dired-mode-map (kbd &quot;RET&quot;) &#39;dired-find-alternate-file)
  )

  (use-package neotree
      :config
      (setq neo-smart-open t)
      :init
      (add-hook &#39;neotree-mode-hook
        (lambda ()
          (define-key evil-normal-state-local-map (kbd &quot;TAB&quot;) &#39;neotree-enter)
          (define-key evil-normal-state-local-map (kbd &quot;SPC&quot;) &#39;neotree-enter)
          (define-key evil-normal-state-local-map (kbd &quot;q&quot;) &#39;neotree-hide)
          (define-key evil-normal-state-local-map (kbd &quot;RET&quot;) &#39;neotree-enter))))

  (use-package ace-window)

  (use-package projectile
      :init
      (setq projectile-completion-system &#39;ivy)
      :config
      (projectile-mode)
      (counsel-projectile-mode))

  (use-package magit
      :init
      (keychain-refresh-environment)
      (setq magit-completing-read-function &#39;ivy-completing-read))


  (use-package markdown-mode
    :mode ((&quot;README\\.md\\&#39;&quot; . gfm-mode)
       (&quot;\\.md\\&#39;&quot; . markdown-mode)
       (&quot;\\.markdown\\&#39;&quot; . markdown-mode))
    :init (setq markdown-command &quot;multimarkdown&quot;))

  (use-package gh-md)

  (use-package js2-mode
    :init
    (setq auto-mode-alist
    (append
     &#39;((&quot;\\.js\\&#39;&quot; . js2-mode))
     auto-mode-alist)))

  (use-package multi-term
    :init
    (setq multi-term-program &quot;/bin/zsh&quot;))
#+END_SRC
*** vm快捷键设置
#+BEGIN_SRC emacs-lisp

(use-package evil
    :init
    (general-evil-setup t)
    :config 
    (evil-mode 1)
    (nvmap :prefix &quot;,&quot;

    &quot;p&quot; &#39;projectile-command-map
    &quot;v&quot; &#39;evil-visual-block

    &quot;x1&quot; &#39;delete-other-windows
    &quot;xo&quot; &#39;other-window
    &quot;x0&quot; &#39;delete-window
    &quot;xq&quot; &#39;delete-window
    &quot;x2&quot; &#39;split-window-below
    &quot;x3&quot; &#39;split-window-right
    &quot;xf&quot; &#39;counsel-find-file
    &quot;xm&quot; &#39;counsel-M-x
    &quot;xr&quot; &#39;counsel-recentf
    &quot;xb&quot; &#39;ivy-switch-buffer
    &quot;bb&quot; &#39;back-to-previous-buffer
    &quot;xB&quot; &#39;list-buffers
    &quot;xd&quot; &#39;dired
    &quot;xj&quot; &#39;dired-jump
    &quot;xs&quot; &#39;save-buffer
    &quot;xc&quot; &#39;save-buffers-kill-terminal
    &quot;xk&quot; &#39;kill-buffer
    &quot;xe&quot; &#39;eval-last-sexp

    &quot;aw&quot; &#39;ace-swap-window
    &quot;eb&quot; &#39;eval-buffer
    &quot;cg&quot; &#39;counsel-git
    &quot;oa&quot; &#39;org-agenda

    &quot;nf&quot; &#39;neotree-find
    &quot;nt&quot; &#39;neotree-toggle
    &quot;ns&quot; &#39;neotree-hidden-file-toggle
    &quot;ng&quot; &#39;neotree-refresh
    &quot;nd&quot; &#39;neotree-delete-node
    &quot;nr&quot; &#39;neotree-rename-node
    &quot;nc&quot; &#39;neotree-create-node
    &quot;sv&quot; &#39;neotree-enter-vertical-split
    &quot;sh&quot; &#39;neotree-enter-horizontal-split
    &quot;gs&quot; &#39;magit-status

    &quot;mm&quot; &#39;multi-term
    &quot;mf&quot; &#39;multi-term-next
    &quot;mb&quot; &#39;multi-term-prev
    &quot;ms&quot; &#39;multi-term-dedicated-select
    &quot;mt&quot; &#39;multi-term-dedicated-toggle
    ))

#+END_SRC
** 优化 And Function
*** 优化快捷键
#+BEGIN_SRC emacs-lisp
(global-set-key (kbd &quot;C-h&quot;) &#39;delete-backward-char)
(global-set-key (kbd &quot;M-/&quot;) &#39;hippie-expand)
#+END_SRC
*** Function
#+BEGIN_SRC emacs-lisp
;; back buffer
(defun back-to-previous-buffer ()
       (interactive)
       (switch-to-buffer nil))
;; show paren in function
(define-advice show-paren-function (:around (fn) fix-show-paren-function)
&quot;Highlight enclosing parens.&quot;
(cond ((looking-at-p &quot;\\s(&quot;) (funcall fn))
    (t (save-excursion
        (ignore-errors (backward-up-list))
        (funcall fn)))))
;; skeleton	    
(define-skeleton 1src
    &quot;Input src&quot;
    &quot;&quot;
    &quot;#+BEGIN_SRC emacs-lisp \n&quot;
    _ &quot;\n&quot;
    &quot;#+END_SRC&quot;)
(define-skeleton 1java
    &quot;Input src&quot;
    &quot;&quot;
    &quot;#+HEADER: :classname\n&quot;
    &quot;#+BEGIN_SRC java \n&quot;
    _ &quot;\n&quot;
    &quot;#+END_SRC&quot;)
(define-abbrev org-mode-abbrev-table &quot;isrc&quot; &quot;&quot; &#39;1src)
(define-abbrev org-mode-abbrev-table &quot;ijava&quot; &quot;&quot; &#39;1java)
;; hippie expand
(setq hippie-expand-try-function-list &#39;(try-expand-debbrev
                    try-expand-debbrev-all-buffers
                    try-expand-debbrev-from-kill
                    try-complete-file-name-partially
                    try-complete-file-name
                    try-expand-all-abbrevs
                    try-expand-list
                    try-expand-line
                    try-complete-lisp-symbol-partially
                    try-complete-lisp-symbol))
#+END_SRC
    
    
```			 
</code></pre>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/emacs/" rel="tag"># emacs</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2018/03/28/2018/" rel="prev" title="2018随手一笔">
                  <i class="fa fa-angle-left"></i> 2018随手一笔
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2018/06/08/d2018-06-08/" rel="next" title="emacs skeleton">
                  emacs skeleton <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Stanhe</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
